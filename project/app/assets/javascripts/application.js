function wait_a_second(){$("select").customStyle(),$("input[type=file]").customFile()}function resizeImage(e,t,n,r){var i=r,s=n,o=0;if(t==e)n!=null&&e<n&&(s=n,i=n);else if(e>t&&r!=null||r==null)r!=null?(s=Math.ceil(e/t*r),i=r):(s=Math.ceil(e/e*n),i=Math.ceil(s/e*t)),o=-(s-n/2)+s/2;else if(e<t&&n!=null||n==null)n!=null?(i=Math.ceil(t/e*n),s=n):(i=Math.ceil(t/t*r),s=Math.floor(i/t*e));var u=new Array;return u.w=s,u.h=i,u.l=o,u}function processImage(e,t,n,r){var i;typeof r=="undefined"?i="absolute":i=r,e.hide();var s=new Image;s.src=e.attr("src");var o=resizeImage(s.width,s.height,t,n);e.css({height:o.h,width:o.w,position:i,left:o.l}),e.show("fast")}function ajax_error_notification(e,t){alert(t)}function ajax_error_notification(e,t,n){var r=n;n==undefined&&(r=t),e.responseText!=""&&(r+=":\n\n"+e.responseText),alert(r)}function showMgLightWindow(e){hideMgLightWindow(),e["attach_to"]==null&&(e.attach_to="body"),e["close_button"]==null&&(e.close_button=!1),e["content"]==null&&(e.content=""),e["content_is_text"]==null&&(e.content_is_text=!1),e["title"]==null&&(e.title=""),e["disable_attached"]==null&&(e.disable_attached=!0),e["lw_background"]==null&&(e.lw_background="#FFF"),e["lw_opacity"]==null&&(e.lw_opacity=50);var t=e.attach_to,n=e.content,r=e.title,i=e.close_button,s=e.disable_attached,o=$(t).width(),u=$(t).height(),a,f;e["lw_width"]==null&&t!="body"?a=o-40:a=e.lw_width-20,e["lw_width"]==null&&t=="body"&&(a=$(".container").width()),e["lw_height"]==null?f="auto":f=e.lw_height;var l,c;e["lw_center_x"]==null&&(e.lw_center_x="center"),e["lw_center_x"]=="center"?l=o/2-a/2-20:l=e.lw_center_x,e["lw_center_y"]==null&&(e.lw_center_y="center"),e["lw_center_y"]=="center"&&(f!="auto"?c=u/2-f/2:c=u/2,t=="body"&&(c=($(window).height()-f)/2+$(window).scrollTop())),$(t).css("position","relative"),$(t).append('<div class="black_bg"></div><div class="lightbox"><span id="lightwindow_content"></span></div>'),o+="px",u+="px",a!="auto"&&(a+="px"),f!="auto"&&(f+="px"),$(".black_bg").css({position:"absolute",width:o,height:u,display:"block","background-color":"#000",top:0,left:0,"z-index":500,"-moz-opacity":e.lw_opacity/100,filter:"alpha(opacity="+e.lw_opacity+")",opacity:e.lw_opacity/100}),isNaN(c)&&(c=0),$(".lightbox").css({position:"absolute",width:a,height:f,top:c+"px",left:l+"px",padding:"5px",margin:"10px",display:"block","background-color":e.lw_background,"z-index":4e3,"text-align":"center"}),$(".black_bg").hide(),$(".lightbox").hide(),e["lw_center_x"]!=null&&e["lw_center_x"]!="center"&&$(".lightbox").css("left",e.lw_center_x+"px"),e["lw_center_y"]!=null&&e["lw_center_y"]!="center"&&$(".lightbox").css("top",e.lw_center_y+"px"),e.content_is_text&&(n='<p class="text">'+n+"</p>"),$("#lightwindow_content").html(n),r!=""&&$(".lightbox").prepend('<div class="title">'+r+"</div>"),i==1&&$(".lightbox > .title").append("<div class='close_lw_div' ><input class='close_lw_btn' type='button' value='' onclick='hideMgLightWindow()'></div>");if(e["lw_center_y"]=="center"&&f=="auto"){var h=$(".lightbox").height();c=parseInt(u)/2-h/2,t=="body"&&(c=($(window).height()-h)/2+$(window).scrollTop()),$(".lightbox").css("top",c+"px")}t=="body"&&(wbox=parseInt(a)-20,$(".lightbox").css("width",wbox+"px"),l=($(window).width()-wbox-40)/2+$(window).scrollLeft(),$(".lightbox").css("left",l+"px"),$(".lightbox").css("position","fixed"),setTimeout("xPositionLightWindow('"+t+"')",100)),s||$(".black_bg").click(function(){$(this).remove(),$(".lightbox").remove()}),e["lw_center_y"]=="center"?setTimeout("yPositionLightWindow('"+t+"','"+u+"','"+f+"')",100):(t=="body"&&($(".black_bg").css("zIndex",8999),$(".lightbox").css("zIndex",9e3)),$(".black_bg").show(),$(".lightbox").show())}function xPositionLightWindow(e){var t=null;e!=null&&e!=""&&(t=e),t=="body"&&(lw_center_x=$(window).width()/2-$(".lightbox").width()/2,$(".lightbox").css("left",lw_center_x+"px"))}function yPositionLightWindow(e,t,n){if(e=="body")$(".black_bg").css("zIndex",8999),$(".lightbox").css("zIndex",9e3),n=="auto"&&(lw_center_y=$(window).height()/2-$(".lightbox").height()/2,$(".lightbox").css("top",lw_center_y+"px"));else{var r=$(".lightbox").height()/2,i=parseInt(t)/2,s=i-(r+20);$(".lightbox").css("top",s+"px"),$(".black_bg").css("zIndex",500),$(".lightbox").css("zIndex",4e3)}$(".black_bg").show(),$(".lightbox").show()}function hideMgLightWindow(){$(".black_bg").remove(),$(".lightbox").remove()}function formatMediaElementVideoTag(e,t,n,r,i,s){var o;return s=="youtube"?o='<iframe type="text/html" width="'+t+'" height="'+n+'" src="http://www.youtube.com/embed/'+r+'?showinfo=0&rel=0" frameborder="0" wmode="Opaque"></iframe>':s=="vimeo"&&(o='<iframe src="http://player.vimeo.com/video/'+r+'?badge=0" width="'+t+'" height="'+n+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe> <p><a href="http://vimeo.com/'+r+'">WeDidIt Client Testimonial</a> from <a href="http://vimeo.com/user9984618">WeDidIt</a> on <a href="http://vimeo.com">Vimeo</a>.</p>'),o}function uniqid(){var e=new Date,t=e.getTime(),n=1+Math.floor(Math.random()*32767),r=1+Math.floor(Math.random()*32767),i=t+"-"+n+"-"+r;return i}(function(e,t){var n=function(){var t=e._data(document,"events");return t&&t.click&&e.grep(t.click,function(e){return e.namespace==="rails"}).length};n()&&e.error("jquery-ujs has already been loaded!");var r;e.rails=r={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input:file",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(n){var i,s,o,u,a,f,l,c;if(r.fire(n,"ajax:before")){u=n.data("cross-domain"),a=u===t?null:u,f=n.data("with-credentials")||null,l=n.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(n.is("form")){i=n.attr("method"),s=n.attr("action"),o=n.serializeArray();var h=n.data("ujs:submit-button");h&&(o.push(h),n.data("ujs:submit-button",null))}else n.is(r.inputChangeSelector)?(i=n.data("method"),s=n.data("url"),o=n.serialize(),n.data("params")&&(o=o+"&"+n.data("params"))):(i=n.data("method"),s=r.href(n),o=n.data("params")||null);c={type:i||"GET",data:o,dataType:l,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),r.fire(n,"ajax:beforeSend",[e,i])},success:function(e,t,r){n.trigger("ajax:success",[e,t,r])},complete:function(e,t){n.trigger("ajax:complete",[e,t])},error:function(e,t,r){n.trigger("ajax:error",[e,t,r])},xhrFields:{withCredentials:f},crossDomain:a},s&&(c.url=s);var p=r.ajax(c);return n.trigger("ajax:send",p),p}return!1},handleMethod:function(n){var i=r.href(n),s=n.data("method"),o=n.attr("target"),u=e("meta[name=csrf-token]").attr("content"),a=e("meta[name=csrf-param]").attr("content"),f=e('<form method="post" action="'+i+'"></form>'),l='<input name="_method" value="'+s+'" type="hidden" />';a!==t&&u!==t&&(l+='<input name="'+a+'" value="'+u+'" type="hidden" />'),o&&f.attr("target",o),f.hide().append(l).appendTo("body"),f.submit()},disableFormElements:function(t){t.find(r.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(r.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t=e.data("confirm"),n=!1,i;return t?(r.fire(e,"confirm")&&(n=r.confirm(t),i=r.fire(e,"confirm:complete",[n])),n&&i):!0},blankInputs:function(t,n,r){var i=e(),s,o,u=n||"input,textarea",a=t.find(u);return a.each(function(){s=e(this),o=s.is(":checkbox,:radio")?s.is(":checked"):s.val();if(!o==!r){if(s.is(":radio")&&a.filter('input:radio:checked[name="'+s.attr("name")+'"]').length)return!0;i=i.add(s)}}),i.length?i:!1},nonBlankInputs:function(e,t){return r.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},callFormSubmitBindings:function(n,r){var i=n.data("events"),s=!0;return i!==t&&i.submit!==t&&e.each(i.submit,function(e,t){if(typeof t.handler=="function")return s=t.handler(r)}),s},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return r.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.data("ujs:enable-with",!1)),e.unbind("click.railsDisable")}},r.fire(e(document),"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,n){e.crossDomain||r.CSRFProtection(n)}),e(document).delegate(r.linkDisableSelector,"ajax:complete",function(){r.enableElement(e(this))}),e(document).delegate(r.linkClickSelector,"click.rails",function(n){var i=e(this),s=i.data("method"),o=i.data("params");if(!r.allowAction(i))return r.stopEverything(n);i.is(r.linkDisableSelector)&&r.disableElement(i);if(i.data("remote")!==t){if((n.metaKey||n.ctrlKey)&&(!s||s==="GET")&&!o)return!0;var u=r.handleRemote(i);return u===!1?r.enableElement(i):u.error(function(){r.enableElement(i)}),!1}if(i.data("method"))return r.handleMethod(i),!1}),e(document).delegate(r.inputChangeSelector,"change.rails",function(t){var n=e(this);return r.allowAction(n)?(r.handleRemote(n),!1):r.stopEverything(t)}),e(document).delegate(r.formSubmitSelector,"submit.rails",function(n){var i=e(this),s=i.data("remote")!==t,o=r.blankInputs(i,r.requiredInputSelector),u=r.nonBlankInputs(i,r.fileInputSelector);if(!r.allowAction(i))return r.stopEverything(n);if(o&&i.attr("novalidate")==t&&r.fire(i,"ajax:aborted:required",[o]))return r.stopEverything(n);if(s){if(u){setTimeout(function(){r.disableFormElements(i)},13);var a=r.fire(i,"ajax:aborted:file",[u]);return a||setTimeout(function(){r.enableFormElements(i)},13),a}return!e.support.submitBubbles&&e().jquery<"1.7"&&r.callFormSubmitBindings(i,n)===!1?r.stopEverything(n):(r.handleRemote(i),!1)}setTimeout(function(){r.disableFormElements(i)},13)}),e(document).delegate(r.formInputClickSelector,"click.rails",function(t){var n=e(this);if(!r.allowAction(n))return r.stopEverything(t);var i=n.attr("name"),s=i?{name:i,value:n.val()}:null;n.closest("form").data("ujs:submit-button",s)}),e(document).delegate(r.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&r.disableFormElements(e(this))}),e(document).delegate(r.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&r.enableFormElements(e(this))}),e(function(){csrf_token=e("meta[name=csrf-token]").attr("content"),csrf_param=e("meta[name=csrf-param]").attr("content"),e('form input[name="'+csrf_param+'"]').val(csrf_token)}))})(jQuery),$(document).ready(function(){$('button, input[type="button"], input[type="submit"], input[type="reset"]').button(),$("input[type=file]").attr({size:73}),$("select").css({opacity:0,display:"none"}),$("body#users_new").length==0&&setTimeout(wait_a_second,250),$(".cont_messages").click(function(){$(this).slideUp("slow")}),$.ajaxSetup({error:ajax_error_notification,complete:function(){xPositionLightWindow(null)}}),$("table .img_preview img").each(function(){this.src=this.src}).load(function(){processImage($(this),60,60)}),$(".sharing_authorization a").click(function(e){e.preventDefault();var t=[];t.close_button=!0,t.title="Help us spread the word!",t.lw_width=500,t.content='<div id="remote">',t.content+="Add your social networks so we can help you spread<br />the news about the Campaigns to which you donate",t.content+=$("#services_needed").html().trim(),t.content=t.content+"</div>",showMgLightWindow(t)})}),$(".dropdown dt a").click(function(){$(".dropdown dd ul").toggle()}),$(document).bind("click",function(e){var t=$(e.target);t.parents().hasClass("dropdown")||$(".dropdown dd ul").hide()}),function(e){e.fn.extend({customStyle:function(t){if(!e.browser.msie||e.browser.msie&&e.browser.version>6)return this.each(function(){var t=e(this),n=e(this).find(":selected"),r=e(this).attr("disabled"),i=e("option",e(this)),s=uniqid(),o="custom_"+s+"_"+e(this).attr("id"),u="#"+o;e(this).before("<div class='cont_select'><dl id='"+o+"' class='dropdown'></dl></div>").css({opacity:0}),e(u).append("<dt><a href='javascript:void(0);'><span>"+n.text()+"<span class='value'>"+n.val()+"</span></span></a></dt>");var a=parseInt(e(this).width()),f=10,l=e.browser;l.mozilla?(a+=30,f=9):e.browser.webkit?f=35:e.browser.msie&&(f=35),e(u).append("<dd><ul></ul></dd>"),e(".cont_select").css({width:t.width()}),i.each(function(){e(u+" dd ul").append("<li><a href='#'>"+e(this).text()+"<span class='value'>"+e(this).val()+"</span></a></li>").css({zIndex:1e4,width:t.width()-f})}),e(u).css({width:a}),r!="disabled"&&(e(u+" dt a").click(function(){return e(u+" dd ul").animate({height:"toggle"},100),!1}),e(u+" dd ul li a").click(function(){return e(u+" dt a > span").html(e(this).html()),e(u+" dd ul").hide(),t.val(e(this).find("span.value").html()),!1}),e(document).bind("click",function(t){var n=e(t.target);n.parents().hasClass("dropdown")||e(".dropdown dd ul").hide()}))})}})}(jQuery),function(e){e.fn.extend({customFile:function(t){if(!e.browser.msie||e.browser.msie&&e.browser.version>6)return this.each(function(){var t=e(this),n=e(this).attr("disabled"),r=e(this).attr("id")+"_file";e(this).before("<div id='"+r+"' class='cont_file'><span class='file_upload'>Choose file</span><span class='browse'>Browse</span>").css({opacity:0});var i=parseInt(e(this).width());e(".cont_file").css({width:i}),n!="disabled"&&e(this).bind("change",function(){var t=e(this);$val=t.val(),valArray=$val.split("\\"),newVal=valArray[valArray.length-1],$button=t.siblings(".cont_file").find(".file_upload"),newVal!==""&&$button.html(newVal)})})}})}(jQuery);